{"version":3,"file":"index.js","names":[],"mappings":"","sources":["index.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({\"./src/scripts/page/index.js\":[function(require,module,exports){\nvar Login = require(\"../mod/login.js\");\nvar pop = require(\"../mod/pop.js\");\n(function($){\n    var box = $(\"#login\");\n    var login = new Login(box);\n    login.init();\n    var  decode = window.decodeURIComponent;\n    var search = window.location.search;\n    var ss, params = {};\n    search = search.replace(/^\\?/,\"\");\n    ss =  search.split(\"&\");\n    for (var i = 0, l = ss.length; i < l; i++) {\n        var t = ss[i].split(\"=\")\n        params[t[0]] = decode(t[1]);\n    }\n    if (params.msg == \"error_login_1\") {\n        pop.alert(\"对不起，账号密码错误，请重新输入\");\n        return;\n    }\n    \n})(jQuery);\n\n},{\"../mod/login.js\":\"/Users/wk/myspace/git/kvv/amily_ms_web/src/scripts/mod/login.js\",\"../mod/pop.js\":\"/Users/wk/myspace/git/kvv/amily_ms_web/src/scripts/mod/pop.js\"}],\"/Users/wk/myspace/git/kvv/amily_ms_web/src/scripts/lib/ibrowser.js\":[function(require,module,exports){\n//浏览器判断\nvar ua  = window.navigator.userAgent.toLowerCase(),\n    check = function(r){\n        return r.test(ua);\n    };\nvar isOpera  =  check(/opera/),\n    isChrome = check(/\\bchrome\\b/),\n    isWebKit = check(/webkit/),\n    isSafari = !isChrome && isWebKit,\n    isIE     = check(/msie/) && document.all && !isOpera,\n    isIE7    = check(/msie 7/),\n    isIE8    = check(/msie 8/),\n    isIE9    = check(/msie 9/),\n    isIE10    = check(/msie 10/),\n    isIE6    = isIE && !isIE7 && !isIE8 && !isIE9 && !isIE10,\n    isIE11   = check(/trident/) && ua.match(/rv:([\\d.]+)/)?true:false,\n    isGecko  = check(/gecko/) && !isWebKit,\n    isMac    = check(/mac/);\n\nvar Browser = {\n    isOpera : isOpera,\n    isChrome : isChrome,\n    isWebKit : isWebKit,\n    isSafari : isSafari,\n    isIE     : isIE,\n    isIE7    : isIE7,\n    isIE8    : isIE8,\n    isIE9    : isIE9,\n    isIE6    : isIE6,\n    isIE11    :isIE11,\n    isGecko  : isGecko,\n    isMac    : isMac\n};\nmodule.exports = Browser;\n\n},{}],\"/Users/wk/myspace/git/kvv/amily_ms_web/src/scripts/lib/idialog.js\":[function(require,module,exports){\nvar Browser = require(\"./ibrowser\");\r\nvar Dialog  = (function($,window){\r\n\t\tvar _isIE  = Browser.isIE,\r\n\t\t    _isIE6 = Browser.isIE6,\r\n\t\t\t$doc   = $(window.document),\r\n\t\t\t$body  = $('body'),\r\n\t\t\t$win   = $(window); \r\n        var IE6_LEFT_OFFSET = 16; //IE6下滑动条的宽度\r\n\t\tvar _isMac = Browser.isMac;\r\n\t\tvar hasScroll = false;\r\n        //防止引用JS文件在head 里取不到body\r\n        if (!$body[0]) {\r\n            $(function(){\r\n                $body =  $('body'); \r\n            });\r\n        }\r\n        //背景 前景 \r\n\t\tvar dlg_mask_html = '<div class=\"g-pop-bg\"></div>',\r\n\t\t\tdlg_box_html = '<div class=\"g_dlg_box g-pop\"></div>';\r\n\r\n\t\tvar dlgid = \"dlg\",\r\n            mids=0 , \r\n            ids = 0,\r\n\t\t\t_d_zindex = 100000;\r\n\r\n\t\tvar def_config = {\r\n\t\t\tcontent:'',\r\n\t\t\tmaskVisible : true,\r\n\t\t\ttop:0,\r\n\t\t\tleft:0,\r\n\t\t\twidth:0,\r\n\t\t\theight:0,\r\n\t\t\tnewMask : false,\r\n\t\t\tcontentStyle : \"\",\r\n\t\t\tborderStyle :\"\",  // border样式 \r\n\t\t\ttitleStyle : \"\", //标题样式\r\n\t\t\tcloseCls  : \"\", //关闭按钮 class 如果有会替换掉 原来的 dlg_close \r\n            close_fn : function(){},\r\n\t\t\thideCloseBtn: false\r\n\t\t};\r\n\t\t// mix config setting.\r\n\t\tvar mix_cfg = function(n, d) {\r\n\t\t\tvar cfg = {},\r\n\t\t\t\ti;\r\n\t\t\tfor (i in d) {\r\n\t\t\t\tif (d.hasOwnProperty(i)) {\r\n\t\t\t\t\tcfg[i] = typeof n[i] !== 'undefined' ? n[i] : d[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn cfg;\r\n\t\t}\r\n\t\tvar getWinRect = function(){\r\n\t\t\t\tvar win = $win;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tscrollTop :  $doc.scrollTop(),\r\n\t\t\t\t\tscrollLeft : $doc.scrollLeft(),\r\n\t\t\t\t\twidth : win.width(),\r\n                    height : win.height()\r\n                    //width: win[0].innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\r\n\t\t\t\t\t//height: win[0].innerHeight || document.documentElement.clientHeight || document.body.clientHeight\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tvar _mask_id = \"dlg_mask_\";\r\n\t\tvar Mask = function(){\r\n\t\t    this.id = _mask_id+(++mids);\r\n\t\t\tthis._dom = $('<div id=\"'+(this.id)+'\" class=\"g-pop-bg\" style=\"z-index:'+(++_d_zindex)+'\"></div>');\r\n\t\t\tthis._init();\r\n\t\t};\r\n\t \tMask.prototype = {\r\n\t\t\t_init : function(){\r\n\t\t\t\t$body.append(this._dom);\r\n\t\t\t\tthis._dom.hide();\r\n\t\t\t\tthis._initEvents();\r\n\t\t\t\tthis.adaptWin();\r\n\t\t\t\tif(this._needIframe()){\r\n\t\t\t\t\tthis._createIframe();\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t_initEvents : function(){\r\n\t\t\t\tvar me = this;\r\n\t\t\t},\r\n\t\t\t_createIframe: function(){\r\n\t\t\t\tthis._iframe = $('<iframe class=\"dlg_miframe\" frameborder=\"0\" src=\"about:blank\"></iframe>');\r\n\t\t\t\tthis._dom.append(this._iframe);\r\n\t\t\t},\r\n\t\t\taddClass : function( clsName){\r\n\t\t\t\tthis._dom.addClass(clsName);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 检测自动生成iframe条件\r\n\t\t\t *\r\n\t\t\t * @method\r\n\t\t\t * @protected\r\n\t\t\t * @param void\r\n\t\t\t * @return {bool}\r\n\t\t\t */\r\n\t\t\t_needIframe: function () {\r\n\t\t\t\tvar useIframe = !!window.ActiveXObject\r\n\t\t\t\t\t\t\t\t&& ((_isIE6 && $('select').length)\r\n\t\t\t\t\t\t\t\t|| $('object').length);\r\n\t\t\t\treturn useIframe;\r\n\t\t\t},\r\n\t\t\tadaptWin : function(){\r\n\t\t\t\tif(_isIE6){\r\n\t\t\t\t\tthis._dom.css({\r\n                        top : $doc.scrollTop(), \r\n                        left : $doc.scrollLeft(),\r\n\t\t\t\t\t\theight: $win.height(),\r\n\t\t\t\t\t\twidth: $win.width()\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thide : function(){\r\n\t\t\t\tthis._dom.hide();\r\n                var html_dom = $('html').css(\"overflow\",\"\");\r\n\t\t\t\tif(_isMac == false || 1){\r\n\t\t\t\t\tif(hasScroll){\r\n\t                    html_dom.css(\"padding-right\",\"0px\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshow : function(){\r\n                var me = this;\r\n\t\t\t\tvar wa = $win.width();\r\n                var html_dom = $('html').css(\"overflow\",\"hidden\");\r\n\t\t\t\tvar wb = $win.width();\r\n                me._dom.show();\r\n\t\t\t\tif(_isMac == false || 1){\r\n\t\t\t\t\tif(wa != wb){\r\n\t\t\t\t\t\thasScroll = true;\r\n\t\t\t\t\t\thtml_dom.css(\"padding-right\",IE6_LEFT_OFFSET+\"px\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetDom : function(){\r\n\t\t\t\treturn this._dom;\r\n\t\t\t},\r\n\t\t\tremove: function(){\r\n\t\t\t\tthis._dom.remove();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar most_mask; //公共的Mask\r\n\t\tvar Dialog =  function(cfg){\r\n\t\t\tvar c = cfg || {};\r\n\t\t\tthis.config =  mix_cfg(c,def_config);\r\n\t\t\tthis._init();\r\n\t\t}\r\n\t\tDialog.prototype = {\r\n\t\t\tconstructor : Dialog,\r\n\t\t\t_init : function(){\r\n\t\t\t\tif(!this.config){\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.id = dlgid +(++ids);\r\n\t\t\t\tvar cfg =  this.config;\r\n\r\n\t\t\t\tif(cfg.newMask){\r\n\t\t\t\t\tthis._mask =  new Mask();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!most_mask){\r\n\t\t\t\t\t\tmost_mask =  new Mask();\r\n\t\t\t\t\t\tthis._mask = most_mask;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis._mask =  most_mask;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._creatDialog();\r\n\t\t\t\tthis._initEvents();\r\n\t\t\t\tthis.inited = true;\r\n\t\t\t},\r\n\t\t\t_initEvents : function(){\r\n\t\t\t\tvar me = this,id=this.id;\r\n\r\n\t\t\t\tthis._closeBtn.bind({\r\n\t\t\t\t\tclick : function(e){\r\n\t\t\t\t\t\te.preventDefault();\r\n                        me.close();\r\n\t\t\t\t\t\tme.config.close_fn.call(me,me);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t$win.bind(\"resize.\"+id,resize);\r\n\t\t\t\t\r\n\t\t\t\tme._unbindEvents = function(){\r\n\t\t\t\t\t$win.unbind(\"resize.\"+id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction resize(){\r\n                    if (_isIE6) {\r\n                        me._dlg_container.css({\r\n                            top : $doc.scrollTop(), \r\n                            left : $doc.scrollLeft(),\r\n\t\t\t\t\t\t    width : $win.width(),\r\n\t\t\t\t\t\t    height : $win.height()\r\n\t\t\t\t\t    });\r\n  \r\n                    } else {\r\n                        me._dlg_container.css({\r\n                            width : $win.width(),\r\n                            height : $win.height()\r\n                        });\r\n                    }\r\n\t\t\t\t\tme.toCenter();\r\n\t\t\t\t\tme._mask.adaptWin();\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t_creatDialog : function(){\r\n\t\t\t\tvar cfg = this.config;\r\n\t\t\t\tvar dlg_container = this._dlg_container = $(dlg_box_html).attr(\"id\",this.id).css(\"z-index\",(_d_zindex += 10));\r\n\t\t\t\tif(cfg.content instanceof $){\r\n\t\t\t\t\tthis._dialog = cfg.content;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._dialog = $(cfg.content);\r\n\t\t\t\t}\r\n\t\t\t\tvar dlg = this._dialog;\r\n\t\t\t\tdlg.addClass(\"g_dlg_wrap_css3\");\t\r\n\t\t\t\tdlg_container.html(dlg);\r\n\t\t\t\tthis._content = $(\".js_content\",dlg);\r\n\t\t\t\tthis._closeBtn = $('.js_close',dlg);\r\n\t\t\t\t$body.append(dlg_container);\r\n\r\n\t\t\t\tif(cfg.hideCloseBtn){\r\n\t\t\t\t\tthis._closeBtn.hide();\r\n\t\t\t\t}\r\n\t\t\t\tvar pos =  \"fixed\";\r\n\t\t\t\tif(_isIE6){\r\n\t\t\t\t\tdlg_container.css({\r\n                        top : $doc.scrollTop(), \r\n                        left : $doc.scrollLeft(),\r\n\t\t\t\t\t\twidth : $win.width(),\r\n\t\t\t\t\t\theight : $win.height()\r\n\t\t\t\t\t});\r\n\t\t\t\t\tpos = \"absoulte\";\r\n\t\t\t    } else {\r\n                    dlg_container.css({\r\n\t\t\t\t\t\twidth : $win.width(),\r\n\t\t\t\t\t\theight : $win.height()\r\n                    });\r\n                }\r\n                dlg.css(\"position\",\"absolute\");\r\n\t\t\t\tthis.setPos(pos);\t\t\t\t\r\n\t\t\t\t//this.toCenter();\r\n\t\t\t},\r\n\t\t\tsetPos : function(pos){\r\n\t\t\t\tthis._dlg_container.css(\"position\",pos);\r\n\t\t\t},\r\n\t\t\t//得到content 返回jQuery 对象\r\n\t\t\tgetContainer : function(){\r\n\t\t\t\treturn this._dlg_container;\r\n\t\t\t},\r\n\t\t\tgetContent : function(){\r\n\t\t\t\treturn this._content;\r\n\t\t\t},\r\n\t\t\tsetContent : function(dom){\r\n\t\t\t\tthis._content.empty();\r\n\t\t\t\tthis._content.html(dom);\t\r\n\t\t\t},\r\n            getDlgDom : function(){\r\n              return this._dialog; \r\n            },\r\n\t\t\tgetCloseBtn : function(){\r\n\t\t\t\treturn this._closeBtn;\r\n\t\t\t},\r\n\t\t\t_setStyle : function(dom,css){\r\n\t\t\t\tif(typeof css == \"string\"){\r\n\t\t\t\t\tif(_isIE){\r\n\t\t\t\t\t\tdom[0].style.cssText = css;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tdom.attr(\"style\",css);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdom.css(css);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttoCenter : function(){\r\n\t\t\t\tvar winRect =  getWinRect(),\r\n\t\t\t\t\tw = this._dialog.width(),\r\n\t\t\t\t\th = this._dialog.height(),\r\n\t\t\t\t\tt = 0,l =0;\r\n                var top = Math.max((winRect.height / 2 - h / 2) >>0 + t,0) ;\r\n                var left  = (winRect.width / 2 - w / 2) >>0 + l;\r\n                if (_isIE6) {\r\n                    left -= IE6_LEFT_OFFSET/2;\r\n                }\r\n\t\t\t\tvar rect = {\r\n\t\t\t\t\tleft :\tleft,\r\n\t\t\t\t   \ttop :  top\r\n\t\t\t\t}\r\n\t\t\t\tthis._dialog.css(rect);\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t    show : function(callback,context){\r\n\t\t\t\tvar me = this;\r\n\t\t\t\tif(me.config.maskVisible){\r\n\t\t\t\t\tme._mask.show();\r\n\t\t\t\t}\r\n                //IE8 以下计算窗口宽度\r\n                me._dlg_container.css({width:\"100%\",height:\"100%\"});\r\n\t\t\t\tme._dlg_container.show();\r\n\t\t\t\tme.toCenter();\r\n\t\t\t\tif(callback){\r\n\t\t\t\t\tcallback.call(context || me,me);\r\n\t\t\t\t}\r\n\t\t\t\tme.showed = true;\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\tclose : function(callback,context){\r\n\t\t\t\tvar me = this;\r\n\t\t\t\tthis._mask.hide();\r\n\t\t\t\tthis._dlg_container.hide();\r\n\t\t\t\tif(callback){\r\n\t\t\t\t\tcallback.call(context || me,me);\r\n\t\t\t\t}\r\n\t\t\t\tthis.showed = false;\r\n\t\t\t\treturn this;\r\n\t\t\t},\r\n\t\t\tdestory : function(){\r\n\t\t\t\tthis.close();\r\n\t\t\t\tthis._unbindEvents();\r\n\t\t\t\tthis.config.newMask && this._mask.remove();\r\n\t\t\t\tthis._dlg_container.remove();\r\n\t\t\t\tthis._dialog.remove();\r\n\t\t\t\tfor(var i in this){\r\n\t\t\t\t\tdelete this[i]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetMask : function(){\r\n\t\t\t\treturn this._mask;\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\t\tDialog.prototype.In = Dialog.prototype.show;\r\n\t\tDialog.prototype.out = Dialog.prototype.close;\r\n\t\tDialog.prototype.hide = Dialog.prototype.close;\r\n\t\tDialog.prototype.remove = Dialog.prototype.destory;\r\n\t\t\r\n\t    \r\n    return Dialog;\r\n\r\n})(jQuery,window);\r\n\r\nmodule.exports = Dialog;\r\n\n},{\"./ibrowser\":\"/Users/wk/myspace/git/kvv/amily_ms_web/src/scripts/lib/ibrowser.js\"}],\"/Users/wk/myspace/git/kvv/amily_ms_web/src/scripts/mod/login.js\":[function(require,module,exports){\n\nvar Login = function(dom){\n    var $form = this.$form = dom.find(\"form\");\n    this.$uname = $form.find(\"input[name=j_username]\");\n    this.$pwd = $form.find(\"input[name=j_password]\");\n    this.$record = $form.find(\"input[name=record]\");\n    this.$submit = $form.find(\"button[type=submit]\");\n    var $chbox = $form.find(\".chbox\");\n    if ($chbox.length) {\n        this._chbox = new Chbox($chbox);\n    }\n}\n\nLogin.prototype = {\n    constructor : Login,\n    init : function(){\n        var me = this;\n        this.$form.submit(function(e){\n             \n        });\n    }\n\n}\n\n\nvar Chbox = function(dom){\n    var checkbox = dom.find(\"input[type=checkbox]\");\n    dom.click(function(e){\n\n        if (checkbox.attr(\"checked\")) {\n            checkbox.removeAttr(\"checked\");  \n            dom.removeClass(\"checked\");\n        } else {\n            checkbox.attr(\"checked\",true);\n            dom.addClass(\"checked\");\n        }\n    });\n}\n\nmodule.exports = Login; \n\n},{}],\"/Users/wk/myspace/git/kvv/amily_ms_web/src/scripts/mod/pop.js\":[function(require,module,exports){\nvar Dialog = require(\"../lib/idialog\");\n\n\nvar pop = function(content){\n    var dlg = new Dialog({\n        content : content\n    });\n    dlg.hide();\n    return dlg;\n}\n\n\nvar alert_dlg , confirm_dlg ;\nvar obj = {\n\n    alert : function(msg){\n        if (!alert_dlg) {\n            var html = '<div class=\"m-pop m-pop-alert\">\\\n                    <div class=\"m-pop-bd \">\\\n                        <p class=\"alert-ct js_content\">'+msg+'</p>\\\n                    </div>\\\n                    <div class=\"m-pop-ft\">\\\n                        <div class=\"btn-wrap\">\\\n                            <button class=\"btn-cfr js_close\">确定</button>\\\n                        </div>\\\n                    </div>\\\n                </div>';\n            alert_dlg = pop(html);\n        } else {\n            alert_dlg.getContent().text(msg);\n        }\n        alert_dlg.show();\n        return alert_dlg;\n    },\n    confirm : function(msg,suc,err){\n          suc = suc || function(){};\n          err = err || function(){};\n\n          if (!confirm_dlg) {\n            var html = '<div class=\"m-pop m-pop-alert\">\\\n                    <div class=\"m-pop-bd \">\\\n                        <p class=\"alert-ct js_content\">'+msg+'</p>\\\n                    </div>\\\n                    <div class=\"m-pop-ft\">\\\n                        <div class=\"btn-wrap\">\\\n                            <button class=\"btn-cfr\">确定</button>\\\n                            <button class=\"btn-cancel\">取消</button>\\\n                        </div>\\\n                    </div>\\\n                </div>';\n            confirm_dlg = pop(html);\n        } else {\n            confirm_dlg.getContent().text(msg);\n        }\n        var $d1 = confirm_dlg.getDlgDom().find(\".btn-cfr\").click(function(){\n            confirm_dlg.hide();\n            suc && suc(); \n            $d1.unbind(); \n            $d2.unbind(); \n        });\n        var $d2 = confirm_dlg.getDlgDom().find(\".btn-cancel\").click(function(){\n            confirm_dlg.hide();\n            $d1.unbind(); \n            $d2.unbind(); \n            err && err();\n        });\n        confirm_dlg.show(); \n    },\n    hd_dlg : function($dom,title,cb,close_fn){\n        var $wrap =  $('<div class=\"m-pop\">\\\n                    <div class=\"m-pop-hd\"><a href=\"javascript:;\" class=\"hd-close js_close\">&times;</a><h4>'+title+'</h4></div>\\\n                    <div class=\"m-pop-bd \">\\\n                        <div class=\"js_content\"></div>\\\n                    </div>\\\n                    <div class=\"m-pop-ft\">\\\n                        <div class=\"btn-wrap\">\\\n                            <button class=\"btn-cfr\">确定</button>\\\n                        </div>\\\n                    </div>\\\n                </div>');   \n        var dlg = new Dialog({\n            content : $wrap,\n            close_fn : function(){\n                dlg.remove();\n                close_fn && close_fn();\n            }\n        });\n        $wrap.find(\".btn-cfr\").click(function(e){\n            e.preventDefault();\n            cb && cb(dlg.getContent(),dlg);\n        });\n        dlg.getContent().html($dom);\n        dlg.hide();\n        return dlg;\n    },\n    dlg : function(content,maskVisible){\n        var dlg = new Dialog({\n            content : content,\n            maskVisible : !!maskVisible\n        });\n        dlg.hide();\n        return dlg;\n    }\n}\n\nmodule.exports = obj;\n\n\n\n},{\"../lib/idialog\":\"/Users/wk/myspace/git/kvv/amily_ms_web/src/scripts/lib/idialog.js\"}]},{},[\"./src/scripts/page/index.js\"]);\n"],"sourceRoot":"/source/"}